{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load widget_tweaks %}
{% block title %}{{ configuration.nom }}{% endblock %}
{% block logo %}
<img src="/{{ configuration.logo }}" style="width:100%; height: 8vh;" class="rounded" alt="Festival">
{% endblock %}
{% block content %}
<div class="container" style="text-align: center;">
    <h2>Modifier la configuration actuelle</h2>
</div>
<form class="persoForm" method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    {% with WIDGET_ERROR_CLASS='champsInvalide' WIDGET_REQUIRED_CLASS='champsRequis'%}
        {% for field in form %}
            {{ field.label_tag }}
            {% render_field field %}
            {% if field.errors %}
                {% for error in field.errors %}
                    <p style="color: red;">* {{ error }}</p>
                {% endfor %}
                {% endif %}
            {% endfor %}
        {% endwith %}
    <button type="button" class="btn btn-primary flexe" data-bs-toggle="modal" data-bs-target="#createPartnerModal">
        Ajouter un nouveau partenaire
    </button>
    <input type="submit" value="Enregistrer">
</form>
{% include '../modal/partenaires/partenaire_create.html' %}
<script>
    let submit = document.getElementById("submitBtn");
    console.log(submit);
    submit.addEventListener('click', function() {
        let modal = document.getElementById('createPartnerModal');
        closeOneModal(modal.id);
    });

    function closeOneModal(modalId) {

// get modal
const modal = document.getElementById(modalId);

// change state like in hidden modal
modal.classList.remove('show');
modal.setAttribute('aria-hidden', 'true');
modal.setAttribute('style', 'display: none');

 // get modal backdrop
 const modalBackdrops = document.getElementsByClassName('modal-backdrop');

 // remove opened modal backdrop
  document.body.removeChild(modalBackdrops[0]);
}
</script>
{% endblock %}
